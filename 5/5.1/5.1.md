# 5.1. Disponibilidad
| Escenario | Atributo de Calidad | Estímulo                                      | Fuente del Estímulo                   | Artefacto Afectado                               | Entorno                   | Respuesta del Sistema                                                                 | Medida de Respuesta                                    |
|------------|---------------------|----------------------------------------------|-------------------------------------|--------------------------------------------------|---------------------------|----------------------------------------------------------------------------------------|-------------------------------------------------------|
| ESC-01     | Disponibilidad      | Fallo del sistema de base de datos local     | Computadora central                  | Módulo de almacenamiento                          | Horario laboral           | El sistema muestra mensaje de error y cierra las conexiones. Luego usa el backup       | El sistema se recupera en menos de 5 minutos          

### Táctica Elegida  
Repuesto (cold spare)

## Título:  
Implementación de Cold Spare para restauración en caso de fallo del sistema de base de datos local.

## Contexto:  
Durante el horario laboral, el módulo de almacenamiento depende de una base de datos local. Que esta falle causaría que las operaciones laborales sea detenidas.  Para evitar esta situación, se requiere de una estrategia que permita usar el servicio sin esta.
## Alternativas:

### Repuesto (cold spare)
- Se mantiene una instancia de base de datos de respaldo desactivada.
- En caso de fallo, el sistema cierra conexiones activas y activa la base de datos de respaldo manual o automáticamente.
- Menor costo operativo, ya que no requiere duplicación activa constante.

### Base de datos en alta disponibilidad (replicación activa-activa)
- Ambas bases (principal y secundaria) están activas y sincronizadas en tiempo real.
- Failover automático sin pérdida de servicio.
- Mayor complejidad ,con su consecuente aumento de costo, en la arquitectura

## Criterios de elección:
- Bajo costo de operación
- Recuperación automática
- Mantenimiento sencillo


## Decisión:  
Se opta por la implementación de un cold spare.

## Sustento:  
Se escogió esta táctica dado que la disponibilidad de la base de datos no requiere de una operación continua fuera de las horas de trabajo (las horas donde puede duplicarse), esta táctica permite una recuperación efectiva sin recurrir al costo de mantener una base de datos duplicada constantemente activa. 


| Escenarios | Atributo de Calidad | Estímulo                                      | Fuente del Estímulo                   | Artefacto Afectado                               | Entorno                   | Respuesta del Sistema                                                                 | Medida de Respuesta                                    |
|------------|---------------------|----------------------------------------------|-------------------------------------|--------------------------------------------------|---------------------------|----------------------------------------------------------------------------------------|-------------------------------------------------------|
| ESC-11     | Disponibilidad      | Muestra de información actual de los CRM     | Jefe de Marketing                  | Módulo CRM                                        | Operación en horario laboral | Los datos de los CRM se actualizarán en un tiempo razonable                           | El tiempo de actualización será de cada 5 minutos      |

### Táctica Elegida  
Asegura la consistencia cuando procesos en paralelo actualizan un solo objeto de dato (transacciones)

## Título:  
Implementación de control transaccional para mantener la consistencia de datos en la sincronización del CRM.

## Contexto:  
Al actualizar los CRM, múltiples llamados de datos son ejecutados al mismo tiempo para la obtención de los datos. Esto puede llevar a inconsistencias si varias operaciones intentan modificar el mismo registro al mismo tiempo. Para garantizar la confiabilidad de la información generada, se verán formas de coordinar los llamados.

## Alternativas:

### Lectura dentro de una transacción (ACID)
- Los datos se consultan en una única transacción con un nivel de aislamiento adecuado.
- Se garantiza que todas las lecturas provienen del mismo punto en el tiempo.
- Se evita la aparición de inconsistencias como datos duplicados, faltantes o desincronizados.

### Lectura directa sin transacción
- Se realiza la lectura sin controlar el estado de los datos.
- Riesgo alto de inconsistencia si los datos cambian durante la generación del gráfico.
- Por su estructura, se podría recibir un gráfico basado en datos obsoletos o incompletos.

## Criterios de elección:
- Consistencia visual del gráfico generado.  
- Precisión de la información mostrada al usuario.  
- Compatible con SQL

## Decisión:  
Se escogió una lectura dentro de una transacción.

## Sustento:  
Para garantizar que los CRM muestren datos precisos, es esencial encapsular la operación dentro de una transacción. Esto asegura que incluso si hay múltiples procesos modificando los mismos datos en paralelo, la lectura para gráficos será consistente y representará una única "fotografía" del estado del sistema. 
